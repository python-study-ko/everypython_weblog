{% load macros %}
{# 블로그에서 테이블형식의 글목록을 만들기 위한 매크로템플릿 입니다. #}

{# 글목록 테이블 생성 매크로 -call로 호출하여 내용을 채우면 됩니다 #}
{% macro table_head col1 col2 col3 col4="" col5="" th1="" th2="" th3="" th4="" th5="" class="" %}
    {% spaceless %}
    <thead {% if class %}class="{{ class }}"{% endif %}>
        <th {% if th1 %}id="{{ th1 }}"{% endif %}>{{ col1 }}</th>
        <th {% if th2 %}id="{{ th2 }}"{% endif %}>{{ col2 }}</th>
        <th {% if th3 %}id="{{ th3 }}"{% endif %}>{{ col3 }}</th>
        {% if col4 %}<th {% if th4 %}id="{{ th4 }}"{% endif %}>{{ col4 }}</th>{% endif %}
        {% if col5 %}<th {% if th5 %}id="{{ th5 }}"{% endif %}>{{ col5 }}</th>{% endif %}
    </thead>
    {% endspaceless %}
{% endmacro %}


{# 글목록 테이블 행 추가 매크로  #}
{# 포스트 목록 테이블엔 최소 3열이 있어야 하며 2,3,4열에 링크가 있을시 링크처리 해준다 #}
{% macro post_list col1 col2 col3 col4="" col5="" col2_link="" col2_pk="" col3_link="" col3_pk="" col4_link="" col4_pk="" clas1="text-center" clas2="text-center" clas3="text-center" clas4="text-center" clas5="text-center" %}
    {% spaceless %}
    <tr>
        {# 첫번쨰 열 #}       <td class="{{ clas1 }}">{{ col1 }}</td>
        {# 두번쨰 열 #}
        {% if col2_link %}  <td class="{{ clas2 }}"><a href="{% url col2_link col2_pk %}">{{ col2 }}</a></td>
        {% else %}          <td class="{{ clas2 }}">{{ col2 }}</td>{% endif %}
        {# 세번째 열 #}
        {% if col3_link %}  <td class="{{ clas3 }}"><a href="{% url col3_link col3_pk %}">{{ col3 }}</a></td>
        {% else %}          <td class="{{ clas3 }}">{{ col3 }}</td>{% endif %}
        {# 네번째 열 #}
        {% if col4_link %}  <td class="{{ clas4 }}"><a href="{% url col4_link col4_pk %}">{{ col4 }}</a></td>
        {% elif col4 %}     <td class="{{ clas4 }}">{{ col4 }}</td>{% endif %}
        {# 다섯번쨰 열 #}
        {% if col5 %}      <td class="{{ clas5 }}">{{ col5 }}</td>{% endif %}
    </tr>
    {% endspaceless %}
{% endmacro %}

{% macro table_body_post posts type %}
    <tbody>
        {% for p_pk,cre_date,title,hits  in posts %}{% spaceless %}
            {% with date=cre_date|date %}
            {% use_macro post_list p_pk date title col4=hits col3_link='blog:PostDetail' col3_pk=p_pk clas3='text-left' %}
            {% endwith %}{% endspaceless %}
        {% empty %}
            <p>{{ name }} {{ type }}는 아직 글이 없습니다</p>
        {% endfor %}
    </tbody>
{% endmacro %}




